{"map":"{\"version\":3,\"sources\":[\"/Users/victordjasliphisitkul/Desktop/Project Official Cov/object-detection-react-victor/src/useWebcam.js\",\"/Users/victordjasliphisitkul/Desktop/Project Official Cov/object-detection-react-victor/src/useModel.js\",\"/Users/victordjasliphisitkul/Desktop/Project Official Cov/object-detection-react-victor/src/useBoxRenderer.js\",\"/Users/victordjasliphisitkul/Desktop/Project Official Cov/object-detection-react-victor/src/index.js\",\"/Users/victordjasliphisitkul/Desktop/Project Official Cov/object-detection-react-victor/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-4-0!/Users/victordjasliphisitkul/Desktop/Project Official Cov/object-detection-react-victor/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-4-1!/Users/victordjasliphisitkul/Desktop/Project Official Cov/object-detection-react-victor/node_modules/postcss-loader/src/index.js??postcss!/Users/victordjasliphisitkul/Desktop/Project Official Cov/object-detection-react-victor/src/styles.module.css\"],\"names\":[\"useWebcam\",\"videoRef\",\"_useState\",\"useState\",\"_useState2\",\"Object\",\"slicedToArray\",\"webcamLoaded\",\"setWebcamLoaded\",\"useEffect\",\"navigator\",\"mediaDevices\",\"getUserMedia\",\"audio\",\"video\",\"facingMode\",\"then\",\"stream\",\"current\",\"srcObject\",\"onloadedmetadata\",\"useModel\",\"modelPath\",\"model\",\"setModel\",\"objectDetector\",\"load\",\"renderPredictions\",\"predictions\",\"canvasRef\",\"ctx\",\"getContext\",\"clearRect\",\"canvas\",\"width\",\"height\",\"font\",\"textBaseline\",\"forEach\",\"prediction\",\"timer\",\"bbox\",\"fillStyle\",\"clearTimeout\",\"class\",\"el\",\"document\",\"getElementById\",\"classList\",\"contains\",\"add\",\"speakWarn\",\"setTimeout\",\"remove\",\"synth\",\"window\",\"speechSynthesis\",\"pitch\",\"utter\",\"SpeechSynthesisUtterance\",\"lang\",\"speak\",\"detectFrame\",\"_ref\",\"asyncToGenerator\",\"regenerator_default\",\"a\",\"mark\",\"_callee\",\"wrap\",\"_context\",\"prev\",\"next\",\"detect\",\"sent\",\"requestAnimationFrame\",\"stop\",\"_x\",\"_x2\",\"_x3\",\"apply\",\"this\",\"arguments\",\"useBoxRenderer\",\"shouldRender\",\"App\",\"useRef\",\"cameraLoaded\",\"react_default\",\"createElement\",\"style\",\"textAlign\",\"fontSize\",\"className\",\"styles\",\"fixed\",\"autoPlay\",\"playsInline\",\"muted\",\"ref\",\"rootElement\",\"ReactDOM\",\"render\",\"module\",\"exports\"],\"mappings\":\"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\",\"sourcesContent\":[\"import { useEffect, useState } from 'react'\\n\\nconst useWebcam = videoRef => {\\n  const [webcamLoaded, setWebcamLoaded] = useState(false)\\n  useEffect(() => {\\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\\n      navigator.mediaDevices\\n        .getUserMedia({\\n          audio: false,\\n          video: {\\n            facingMode: 'user'\\n          }\\n        })\\n        .then(stream => {\\n          // window.stream = stream\\n          videoRef.current.srcObject = stream\\n          videoRef.current.onloadedmetadata = () => {\\n            setWebcamLoaded(true)\\n          }\\n        })\\n    }\\n  }, [videoRef])\\n  return webcamLoaded\\n}\\n\\nexport default useWebcam\\n\",\"import { useEffect, useState } from 'react'\\n\\nimport objectDetector from '@cloud-annotations/object-detection'\\n\\nconst useModel = modelPath => {\\n  const [model, setModel] = useState()\\n  useEffect(() => {\\n    objectDetector.load(modelPath).then(model => {\\n      setModel(model)\\n    })\\n  }, [modelPath])\\n  return model\\n}\\n\\nexport default useModel\\n\",\"import { useEffect } from 'react'\\n\\nconst SCORE_DIGITS = 4\\nlet hasSpeak = false;\\n\\nconst getLabelText = (prediction) => {\\n    const scoreText = prediction.score.toFixed(SCORE_DIGITS)\\n    return prediction.class + ', score: ' + scoreText\\n}\\n\\nconst renderPredictions = (predictions, canvasRef) => {\\n  const ctx = canvasRef.current.getContext('2d')\\n  ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height)\\n  // Font options.\\n  const font = '16px sans-serif'\\n  ctx.font = font\\n  ctx.textBaseline = 'top'\\n  // predictions.forEach(prediction => {\\n  //   const x = prediction.bbox[0]\\n  //   const y = prediction.bbox[1]\\n  //   const width = prediction.bbox[2]\\n  //   const height = prediction.bbox[3]\\n  //   // Draw the bounding box.\\n  //   ctx.strokeStyle = '#00FFFF'\\n  //   ctx.lineWidth = 4\\n  //   ctx.strokeRect(x, y, width, height)\\n  //   // Draw the label background.\\n  //   ctx.fillStyle = '#00FFFF'\\n  //   const textWidth = ctx.measureText(getLabelText(prediction)).width\\n  //   const textHeight = parseInt(font, 10) // base 10\\n  //   ctx.fillRect(x, y, textWidth + 4, textHeight + 4)\\n  // })\\n\\n  predictions.forEach(prediction => {\\n    var timer;\\n    const x = prediction.bbox[0]\\n    const y = prediction.bbox[1]\\n    // Draw the text last to ensure it's on top.\\n    ctx.fillStyle = '#000000'\\n    // ctx.fillText(getLabelText(prediction), x, y)\\n    clearTimeout(timer);\\n    if(prediction.class===\\\"Touch-Face\\\"){\\n      \\n      let el = document.getElementById(\\\"js-body\\\");\\n      if(!el.classList.contains(\\\"error\\\")){\\n        el.classList.add(\\\"error\\\");\\n        speakWarn();\\n        timer = setTimeout(function(){\\n          el.classList.remove(\\\"error\\\");\\n        },1500)\\n      }\\n     \\n      //speakWarn();\\n\\n    }\\n  })\\n}\\nconst speakWarn = () =>{\\n  const synth = window.speechSynthesis\\n  synth.pitch = 8;\\n  //synth.rate = 10;\\n  \\n  const utter = new SpeechSynthesisUtterance(\\\"Don't touch your face\\\")\\n  //const voices = speechSynthesis.getVoices()\\n  \\n  utter.lang = 'en-EN';\\n  utter.pitch = 1;\\n\\n  synth.speak(utter);\\n}\\n\\nconst detectFrame = async (model, videoRef, canvasRef) => {\\n  const predictions = await model.detect(videoRef.current)\\n  renderPredictions(predictions, canvasRef)\\n  requestAnimationFrame(() => {\\n    detectFrame(model, videoRef, canvasRef)\\n  })\\n}\\n\\nconst useBoxRenderer = (model, videoRef, canvasRef, shouldRender) => {\\n  useEffect(() => {\\n    if (model && shouldRender) {\\n      detectFrame(model, videoRef, canvasRef)\\n    }\\n  }, [canvasRef, model, shouldRender, videoRef])\\n}\\n\\nexport default useBoxRenderer\\n\",\"import React, { useRef } from 'react'\\nimport ReactDOM from 'react-dom'\\n\\nimport useWebcam from './useWebcam'\\nimport useModel from './useModel'\\nimport useBoxRenderer from './useBoxRenderer'\\n\\n\\nimport styles from './styles.module.css'\\n\\nconst MODEL_PATH = process.env.PUBLIC_URL + '/model_web'\\n\\nconst App = () => {\\n  const videoRef = useRef()\\n  const canvasRef = useRef()\\n\\n  const cameraLoaded = useWebcam(videoRef)\\n  const model = useModel(MODEL_PATH)\\n  useBoxRenderer(model, videoRef, canvasRef, cameraLoaded)\\n  \\n  return (\\n    <div>\\n      <h2 style={{textAlign:'center',fontSize:'3em'}}>VICTOR 's PROJECT</h2>  \\n      <video\\n        className={styles.fixed}\\n        autoPlay\\n        playsInline\\n        muted\\n        ref={videoRef}\\n        width=\\\"700\\\"\\n        height=\\\"500\\\"\\n      />\\n      <canvas\\n        className={styles.fixed}\\n        ref={canvasRef}\\n        width=\\\"700\\\"\\n        height=\\\"500\\\"\\n      />\\n      {/* <button onClick={()=>speakTest()} > Click</button>  */}\\n     \\n    </div>\\n  )\\n}\\n\\nconst rootElement = document.getElementById('root')\\nReactDOM.render(<App />, rootElement)\\n\",\"// extracted by mini-css-extract-plugin\\nmodule.exports = {\\\"fixed\\\":\\\"styles_fixed__v-bnh\\\"};\"]}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t){},133:function(e,t){},134:function(e,t){},176:function(e,t){},177:function(e,t){},178:function(e,t){},179:function(e,t,n){\"use strict\";n.r(t);var a=n(5),c=n.n(a),r=n(88),s=n.n(r),o=n(14);var i=e=>{const t=Object(a.useState)(!1),n=Object(o.a)(t,2),c=n[0],r=n[1];return Object(a.useEffect)(()=>{navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:\"user\"}}).then(t=>{e.current.srcObject=t,e.current.onloadedmetadata=(()=>{r(!0)})})},[e]),c},u=n(89);var f=e=>{const t=Object(a.useState)(),n=Object(o.a)(t,2),c=n[0],r=n[1];return Object(a.useEffect)(()=>{u.a.load(e).then(e=>{r(e)})},[e]),c},d=n(11),l=n.n(d),h=n(17);const m=(e,t)=>{const n=t.current.getContext(\"2d\");n.clearRect(0,0,n.canvas.width,n.canvas.height);n.font=\"16px sans-serif\",n.textBaseline=\"top\",e.forEach(e=>{var t;e.bbox[0],e.bbox[1];if(n.fillStyle=\"#000000\",clearTimeout(t),\"Touch-Face\"===e.class){let e=document.getElementById(\"js-body\");e.classList.contains(\"error\")||(e.classList.add(\"error\"),v(),t=setTimeout(function(){e.classList.remove(\"error\")},1500))}})},v=()=>{const e=window.speechSynthesis;e.pitch=8;const t=new SpeechSynthesisUtterance(\"Don't touch your face\");t.lang=\"en-EN\",t.pitch=1,e.speak(t)},b=function(){var e=Object(h.a)(l.a.mark(function e(t,n,a){var c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.detect(n.current);case 2:c=e.sent,m(c,a),requestAnimationFrame(()=>{b(t,n,a)});case 5:case\"end\":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}();var p=(e,t,n,c)=>{Object(a.useEffect)(()=>{e&&c&&b(e,t,n)},[n,e,c,t])},w=n(47),g=n.n(w);const x=()=>{const e=Object(a.useRef)(),t=Object(a.useRef)(),n=i(e),r=f(\"/model_web\");return p(r,e,t,n),c.a.createElement(\"div\",null,c.a.createElement(\"h2\",{style:{textAlign:\"center\",fontSize:\"3em\"}},\"VICTOR 's PROJECT\"),c.a.createElement(\"video\",{className:g.a.fixed,autoPlay:!0,playsInline:!0,muted:!0,ref:e,width:\"700\",height:\"500\"}),c.a.createElement(\"canvas\",{className:g.a.fixed,ref:t,width:\"700\",height:\"500\"}))},E=document.getElementById(\"root\");s.a.render(c.a.createElement(x,null),E)},47:function(e,t,n){e.exports={fixed:\"styles_fixed__v-bnh\"}},90:function(e,t,n){e.exports=n(179)},99:function(e,t){}},[[90,1,2]]]);","extractedComments":[]}